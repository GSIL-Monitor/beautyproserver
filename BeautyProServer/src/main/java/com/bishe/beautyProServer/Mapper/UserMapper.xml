<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bishe.beautyProServer.Dao.UserDao">
	<resultMap type="com.bishe.beautyProServer.Pojo.UserPojo"
		id="userResultMap">
		<!-- 用id属性来映射主键字段 -->
		<id property="id" column="id" />
		<!-- 用result属性来映射非主键字段 -->
		<result column="nickname" property="nickname"/>
		<result column="password" property="password"/>
		<result column="email" property="email"/>
		<result column="phonenum" property="phonenum"/>
		<result column="createdate" property="createDate"/>
		<result column="updateuser" property="updateUser"/>
		<result column="updatedate" property="updateDate"/>
		<result column="deleteuser" property="deleteUser"/>
		<result column="deletedate" property="deleteDate"/>
	</resultMap>
	<insert id="createUser"
		parameterType="com.bishe.beautyProServer.Pojo.UserPojo"
		useGeneratedKeys="true" keyProperty="id">
		insert into user(nickname,password,email,phonenum,sex,createdate,updateuser,updatedate,deleteuser,deletedate)values 
		(#{nickname},#{password},#{email},#{phonenum},#{sex},#{createDate},#{updateUser},#{updateDate},#{deleteUser},#{deleteDate})
	</insert>
	
	<select id="selectUser" parameterType="map" resultMap="userResultMap">
		select * from user where 1=1
		<if test="nickname!='' and nickname!=null ">
			and nickname=#{nickname}
		</if>
		<if test="password!='' and password!=null ">
			and password=#{password}
		</if>
		<if test="email!='' and email!=null ">
			and email=#{email}
		</if>
		<if test="phonenum!='' and phonenum!=null ">
			and phonenum=#{phonenum}
		</if>
		<if test="createDate!='' and createDate!=null ">
			and createdate=#{createDate}
		</if>
		<if test="updateUser!=0">
			and updateuser=#{updateUser}
		</if>
		<if test="updateDate!='' and updateDate!=null ">
			and updatedate=#{updateDate}
		</if>
		<if test="sex!=0">
			and sex=#{sex}
		</if>
		<if test="deleteUser!=0">
			and deleteuser=#{deleteUser}
		</if>
		<if test="deleteDate!='' and delete!=null ">
			and deletedate=#{deleteDate}
		</if>
	</select>
	
	<select id="selectUserByPhonenum" resultMap="userResultMap">
		select * from user where phonenum=#{phonenum} and password=#{password}
	</select>
	
	<select id="selectUserByEmail" resultMap="userResultMap">
		select * from user where email=#{email} and password=#{password}
	</select>
	
	<update id="updateUser" parameterType="com.bishe.beautyProServer.Pojo.UserPojo">
		update user
		<trim prefix="set" suffixOverrides=",">
			<if test="email!=null and email!='' ">
				email=#{email}
			</if>
			<if test="nickname!=null and nickname!='' ">
				nickname=#{nickname}
			</if>
			<if test="password!=null and password!='' ">
				password=#{password}
			</if>
			<if test="phonenum!=null and phonenum!='' ">
				phonenum=#{phonenum}
			</if>
			<if test="createDate!=null and createDate!='' ">
				createdate=#{createDate}
			</if>
			<if test="updateUser!=0">
				updateuser=#{updateUser}
			</if>
			<if test="updateDate!=null and updateDate!='' ">
				updatedate=#{updateDate}
			</if>
			<if test="sex!=0">
				sex=#{sex}
			</if>
			<if test="deleteUser!=0">
				and deleteuser=#{deleteUser}
			</if>
			<if test="deleteDate!='' and delete!=null ">
				and deletedate=#{deleteDate}
			</if>
		</trim>
		where id=#{id}
	</update>
</mapper>